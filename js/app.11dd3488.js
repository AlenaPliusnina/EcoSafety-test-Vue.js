(function(t){function e(e){for(var n,r,s=e[0],l=e[1],c=e[2],d=0,p=[];d<s.length;d++)r=s[d],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&p.push(a[r][0]),a[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(p.length)p.shift()();return i.push.apply(i,c||[]),o()}function o(){for(var t,e=0;e<i.length;e++){for(var o=i[e],n=!0,s=1;s<o.length;s++){var l=o[s];0!==a[l]&&(n=!1)}n&&(i.splice(e--,1),t=r(r.s=o[0]))}return t}var n={},a={app:0},i=[];function r(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=n,r.d=function(t,e,o){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(o,n,function(e){return t[e]}.bind(null,n));return o},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/EcoSafety-test-Vue.js/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var u=l;i.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"013b":function(t,e,o){"use strict";o("e9fb")},"034f":function(t,e,o){"use strict";o("85ec")},5536:function(t,e,o){t.exports=o.p+"img/ecosafety-logo.7b64439f.jpg"},"56d7":function(t,e,o){"use strict";o.r(e),o.d(e,"eventBus",(function(){return gt}));o("e260"),o("e6cf"),o("cca6"),o("a79d");var n=o("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",{attrs:{id:"app"}},[n("v-app-bar",{attrs:{app:"",color:"white",dark:"",height:"80vh"}},[n("div",{staticClass:"d-flex align-center"},[n("v-img",{staticClass:"shrink ml-3 mr-3",attrs:{alt:"Ecosafety Logo",contain:"",src:o("5536"),transition:"scale-transition",width:"35"}})],1),n("div",{staticClass:"title-wrapper"},[n("v-toolbar-title",{staticClass:"app-bar-title",staticStyle:{"line-height":"1.1rem"}},[t._v("ЭКО")]),n("v-toolbar-title",{staticClass:"app-bar-title",staticStyle:{"margin-left":"10px","font-size":"0.9rem"}},[t._v("БЕЗОПАСНОСТЬ")]),n("v-toolbar-title",{staticClass:"app-bar-title",staticStyle:{"font-size":"0.7rem","font-weight":"bold"}},[t._v("ГРУППА КОМПАНИЙ")])],1),n("v-spacer"),n("div",{directives:[{name:"show",rawName:"v-show",value:t.pid,expression:"pid"}]},[n("v-toolbar-title",{staticClass:"app-bar-title mr-5",staticStyle:{"font-size":"1rem"}},[t._v(" Ваш логин: "+t._s(t.pid)+" ")])],1),n("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.token,expression:"token"}],staticClass:"mr-4",attrs:{icon:"",color:"#004C84"},on:{click:function(e){return t.$store.dispatch("onLogout")}}},[n("v-icon",[t._v("mdi-export")])],1)],1),n("v-main",[n("v-content",{staticClass:"d-flex align-center"},[n("router-view")],1)],1)],1)},i=[],r={name:"App",data:function(){return{token:"",pid:""}},created:function(){var t=this;gt.$on("login",(function(e){t.token=e.token,t.pid=e.pid})),gt.$on("logout",(function(e){t.token=e.token,t.pid=e.pid}))},mounted:function(){this.token=localStorage.getItem("token"),this.pid=localStorage.getItem("pid")}},s=r,l=(o("034f"),o("2877")),c=o("6544"),u=o.n(c),d=o("7496"),p=o("40dc"),m=o("8336"),f=o("a75b"),g=o("132d"),v=o("adda"),h=o("f6c4"),b=o("2fa4"),w=o("2a7f"),_=Object(l["a"])(s,a,i,!1,null,null,null),y=_.exports;u()(_,{VApp:d["a"],VAppBar:p["a"],VBtn:m["a"],VContent:f["a"],VIcon:g["a"],VImg:v["a"],VMain:h["a"],VSpacer:b["a"],VToolbarTitle:w["a"]});o("99af");var x=o("2f62"),k=o("bc3a"),I=o.n(k);n["a"].use(x["a"]);var S=new x["a"].Store({state:{user:localStorage.getItem("token")},mutations:{setLocalStorage:function(t,e){t.user=e,localStorage.setItem("token",e.TK),localStorage.setItem("pid",e.id_login),gt.$emit("login",{token:localStorage.getItem("token"),pid:localStorage.getItem("pid")}),pt.push("/")},logout:function(t){t.user=null,localStorage.removeItem("token"),localStorage.removeItem("pid"),localStorage.removeItem("md5"),gt.$emit("logout",{token:"",pid:""}),pt.push("/login")}},actions:{onLogin:function(t,e){var o=t.commit;console.log(e),I.a.get('https://host1.medsafe.tech:40443/api/client_login?json={"login":"'.concat(e.login,'","password":"').concat(e.password,'","IMEI":"').concat(e.md5,'"}')).then((function(t){var n=t.data[0];0!==n.id_login?(localStorage.setItem("md5",e.md5),o("setLocalStorage",n)):alert("Неверный логин или пароль.")})).catch((function(t){console.log(t.response.data)}))},onLogout:function(t){var e=t.commit;e("logout")}}}),V=o("8c4f"),C=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-container",{attrs:{fluid:""}},[o("DocumentList")],1)},j=[],L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{staticClass:"mx-auto",attrs:{"max-width":"600"}},[t.loading?n("div",{staticClass:"text-center",staticStyle:{"padding-top":"12vh","padding-bottom":"12vh"}},[n("v-progress-circular",{attrs:{size:50,color:"primary",indeterminate:""}})],1):n("v-list",[n("v-list-item-group",{model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},t._l(t.documents,(function(e,a){return n("v-list-item",{key:e},[n("v-img",{staticClass:"shrink ml-3 mr-3",attrs:{contain:"",src:o("9f06"),width:"40"}}),n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:t._s(e.doc_name+" от "+e.date_doc)}})],1),n("v-list-item-icon",[n("v-icon",{domProps:{textContent:t._s("mdi-download")},on:{click:function(e){return t.downloadDoc(a)}}})],1)],1)})),1)],1)],1)},O=[],$={name:"document-list",data:function(){return{model:null,documents:[],loading:!1,pid:localStorage.getItem("pid"),token:localStorage.getItem("token"),md5:localStorage.getItem("md5")}},methods:{downloadDoc:function(t){var e=this.documents[t];I.a.get('https://host1.medsafe.tech:40443/api/test?json={"id_login":"'.concat(this.pid,'","id_people":"').concat(this.pid,'","TK":"').concat(this.token,'","IMEI":"').concat(this.md5,'","Name_app":"connect","Name_event":"get_pic_path","id_document":"').concat(e.id_document,'","doc_type":"').concat(e.doc_type,'"}')).then((function(t){window.location.href="https://host1.medsafe.tech:40443/".concat(t.data.body[0].hash)})).catch((function(t){console.log(t.response)}))}},mounted:function(){var t=this;this.loading=!0,0!==this.pid&&I.a.get('https://host1.medsafe.tech:40443/api/test?json={"id_login":"'.concat(this.pid,'","id_people":"').concat(this.pid,'","TK":"').concat(this.token,'","IMEI":"').concat(this.md5,'","Name_app":"connect","Name_event":"list_load"}')).then((function(e){t.documents=e.data.body,t.loading=!1})).catch((function(t){console.log(t.response)}))}},E=$,P=(o("e043"),o("b0af")),T=o("8860"),M=o("da13"),R=o("5d23"),N=o("1baa"),z=o("34c3"),B=o("490a"),D=Object(l["a"])(E,L,O,!1,null,null,null),F=D.exports;u()(D,{VCard:P["a"],VIcon:g["a"],VImg:v["a"],VList:T["a"],VListItem:M["a"],VListItemContent:R["a"],VListItemGroup:N["a"],VListItemIcon:z["a"],VListItemTitle:R["b"],VProgressCircular:B["a"]});var q={name:"home-page",components:{DocumentList:F}},A=q,K=o("a523"),J=Object(l["a"])(A,C,j,!1,null,null,null),G=J.exports;u()(J,{VContainer:K["a"]});var H=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-container",{attrs:{fluid:""}},[o("v-row",{attrs:{align:"center",justify:"center"}},[o("v-col",{attrs:{cols:"12",xs:"2",sm:"7",md:"5",lg:"4",xl:"2"}},[o("LoginForm")],1)],1)],1)},Q=[],U=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[o("v-card",{staticStyle:{padding:"50px"}},[o("h2",{staticClass:"login-form-title"},[t._v("Вход в личный кабинет")]),o("p",{staticClass:"login-form-subtitle"},[t._v("* Используйте логин и пароль из памятки")]),o("div",{staticClass:"login-form-inputs"},[o("v-text-field",{attrs:{type:"text",rules:t.loginRules,label:"Логин",required:""},model:{value:t.login,callback:function(e){t.login=e},expression:"login"}}),o("v-text-field",{attrs:{type:"password",rules:t.passwordRules,label:"Пароль",required:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),o("v-row",{staticClass:"d-flex justify-space-between"},[o("v-btn",{staticStyle:{"margin-left":"10px"},attrs:{color:"#005B9C",dark:""},on:{click:t.validate}},[t._v("Войти")])],1)],1)],1)},W=[],X=o("1da1"),Y=(o("96cf"),o("a5bb")),Z={name:"login-form",data:function(){return{valid:!0,login:"",password:"",md5:"",loginRules:[function(t){return!!t||"Обязательное поле."}],passwordRules:[function(t){return!!t||"Обязательное поле."}]}},methods:{validate:function(){if(this.$refs.form.validate()){var t={login:this.login,password:this.password,md5:this.md5};this.$store.dispatch("onLogin",t)}}},mounted:function(){var t=this,e=Y["a"].load();Object(X["a"])(regeneratorRuntime.mark((function o(){var n,a;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,e;case 2:return n=o.sent,o.next=5,n.get();case 5:a=o.sent,t.md5=a.visitorId;case 7:case"end":return o.stop()}}),o)})))()}},tt=Z,et=(o("013b"),o("4bd4")),ot=o("0fd9"),nt=o("8654"),at=Object(l["a"])(tt,U,W,!1,null,null,null),it=at.exports;u()(at,{VBtn:m["a"],VCard:P["a"],VForm:et["a"],VRow:ot["a"],VTextField:nt["a"]});var rt={name:"login-page",components:{LoginForm:it}},st=rt,lt=o("62ad"),ct=Object(l["a"])(st,H,Q,!1,null,null,null),ut=ct.exports;u()(ct,{VCol:lt["a"],VContainer:K["a"],VRow:ot["a"]}),n["a"].use(V["a"]);var dt=new V["a"]({mode:"history",routes:[{path:"/",name:"home-page",component:G},{path:"/login",name:"login-page",component:ut,props:function(t){return{data:t.query.data}}}]});dt.beforeEach((function(t,e,o){"/login"===t.path?S.state.user||localStorage.getItem("token")?o({path:"/"}):o():S.state.user||localStorage.getItem("token")?o():o({path:"/login"})}));var pt=dt,mt=o("f309");n["a"].use(mt["a"]);var ft=new mt["a"]({});n["a"].config.productionTip=!1;var gt=new n["a"];new n["a"]({router:pt,store:S,vuetify:ft,render:function(t){return t(y)}}).$mount("#app")},"85ec":function(t,e,o){},"9f06":function(t,e,o){t.exports=o.p+"img/pdf.49d4041b.png"},c5d9:function(t,e,o){},e043:function(t,e,o){"use strict";o("c5d9")},e9fb:function(t,e,o){}});
//# sourceMappingURL=app.11dd3488.js.map